<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coamplification Visualizer</title>
    <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- cytoscape -->
    <script src="https://unpkg.com/cytoscape@3.22.0/dist/cytoscape.min.js"></script>
    <!-- cytoscape-fcose -->
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
    <script src="https://unpkg.com/cytoscape-fcose/cytoscape-fcose.js"></script>
    <!-- cytoscape popper, tippy -->
    <script src="https://unpkg.com/cytoscape-popper@2.0.0/cytoscape-popper.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
	<script src="https://unpkg.com/tippy.js@6"></script>
    <!-- container styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header" id="titleText">ecDNA Coamplification Tool</div>
    <!-- gene input button -->
    <div class="text-storage">
        <textarea id="textBox" placeholder="Enter gene"></textarea>
        <button id="storeButton">â†’</button>
        <p id="storedText"></p>
    </div>
    <!-- container for cytoscape graph -->
    <div id="cy"></div>

    <div class="settings">
        <!-- edge slider -->
        <div class="edge-slider">
            Edge weight minimum: 
            <span id="sliderValue">0</span>
            <div class="slider-info">
                <div class="value-left">0</div>
                <input type="range" id="edgeWeight" class="slider" min="0" max="1" step="0.01" value="0">
                <div class="value-right">1</div>
            </div>
        </div>
        <!-- samples slider -->
        <div class="edge-slider">
            Sample minimum: 
            <span id="sampleValue">0</span>
            <div class="slider-info">
                <div class="value-left">0</div>
                <input type="range" id="numSamples" class="slider" min="0" max="10" step="1" value="0">
                <div class="value-right">10</div>
            </div>
        </div>
        <!-- oncogene button -->
        <div class="edge-slider">
            <span>Oncogenes only</span>
            <input type="checkbox" id="oncogenes_only">
        </div>
        <!-- show all edges between nodes checkbox -->
        <div class="edge-slider">
            <span>Show all edges</span>
            <input type="checkbox" id="all_edges">
        </div>
    </div>

    <!-- Initialize Cytoscape.js -->
    <script src="frontend.js"></script>

    <script>
        // Update graph with button click
        $('#storeButton').on('click', loadGraph);
        // Update graph with all-edges checked
        $('#all_edges').on('change', loadGraph);
        // Update slider value displays
        document.getElementById('edgeWeight').addEventListener('input', function() {
            document.getElementById('sliderValue').textContent = this.value;
        });
        document.getElementById('numSamples').addEventListener('input', function() {
            document.getElementById('sampleValue').textContent = this.value;
        });
    </script>
</body>
</html>